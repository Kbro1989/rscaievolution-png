name = "rsc-evolution-head"
main = "src/index.js"
compatibility_date = "2024-12-05"
compatibility_flags = ["nodejs_compat"]

# Durable Objects for different game systems
[[durable_objects.bindings]]
name = "WORLD_STATE"
class_name = "WorldDurableObject"

[[durable_objects.bindings]]
name = "PLAYER_STATE"
class_name = "PlayerDurableObject"

[[durable_objects.bindings]]
name = "EVOLUTION_ENGINE"
class_name = "EvolutionDurableObject"

[[durable_objects.bindings]]
name = "AI_MANAGER"
class_name = "AIDurableObject"

[[durable_objects.bindings]]
name = "MULTIPLAYER_LOBBY"
class_name = "MultiplayerDurableObject"

# KV for static game data
[[kv_namespaces]]
binding = "GAME_DATA"
id = "your-game-data-kv-id"

[[kv_namespaces]]
binding = "ITEM_DATABASE"
id = "your-item-database-kv-id"

# SQLite storage for complex game state
[[migrations]]
tag = "v1"
new_sqlite_classes = ["WorldDurableObject", "PlayerDurableObject", "EvolutionDurableObject", "MultiplayerDurableObject", "AIDurableObject"]

[env.production]
name = "rsc-evolution-prod"
vars = { ENVIRONMENT = "production", GAME_VERSION = "1.0.0" }

[env.staging]
name = "rsc-evolution-staging" 
vars = { ENVIRONMENT = "staging", GAME_VERSION = "1.0.0-beta" }
